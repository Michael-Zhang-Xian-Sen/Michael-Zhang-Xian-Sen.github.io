---
title: 关于异步（三）： 并发模型与事件循环机制 #文章页面上的显示名称，可以任意修改，不会出现在URL中
date: 2020-03-05 10:05:50 #文章生成时间，一般不改，当然也可以任意修改
categories: 前端 #分类
tags: [js异步] #文章标签，可空，多标签请用格式，注意:后面有个空格
description: js异步
---



## 运行时概念

* **函数调用**形成栈帧
* **对象**被分配在堆中
* **待处理消息**在队列中。消息关联着一个用以处理这个消息的回调函数。

## 事件循环（EventLoop）
1. 事件循环时，“运行时”会先处理队头的消息。处理方式即将该消息移出队列，然后使用其输入参数调用关联的函数，形成栈帧，然后继续执行这个函数直到完成（栈空）。
2. 处理完后，执行下一个消息。

### 添加“消息”
条件：
1. 事件被事件监听器绑定。
2. 事件发生。

注意：
* 如果没有事件监听器，则该事件被丢失。

### 关于处理消息的“执行至完成”过程
* 缺陷：如果消息耗费时间长，则无法处理其他的事情，比如用户的其他交互。
* 对策：
    1. 采用loading动画等提示信息。
    2. 将消息剪裁为多个消息。

### 关于setTimeout
setTimeout接收的参数如下：
* 待加入队列的消息。
* 一个时间值。即消息被加入队列的最小延迟时间。
当经过最小延迟时间后，该消息将入队，但必须要等待到前边的内容全部处理完毕后才能执行。