---
title: js遍历方法总结 #文章页面上的显示名称，可以任意修改，不会出现在URL中
date: 2020-04-23 23:50:50 #文章生成时间，一般不改，当然也可以任意修改
categories: 前端 #分类
tags: [js, 前端] #文章标签，可空，多标签请用格式，注意:后面有个空格
description: js遍历方法的汇总
---

## 目录
1. [遍历语句](#1)
    1. [for](#1.1)
    2. [for ... of](#1.2)
    3. [for ... in](#1.3)
2. [数组遍历方法](#2)
3. [其他注意事项](#3)
    1. [map](#3.1)
    2. [reduce](#3.2)
4. [一些思考](#4)

## <div id="1">1.遍历语句</div>

## <div id="1.1">1.for</div>
极其简单，极其强大，但是书写麻烦，不予赘述。

## <div id="1.2">2. for ... of</div>
主要用来对可迭代对象进行迭代，注意一下不同迭代对象的迭代形式。

## <div id="1.3">3. for ... in</div>
**以任意顺序遍历一个对象的除Symbol以外的可枚举属性**，主要用来迭代对象属性以及debug。

## <div id="2">2. 数组遍历方法</div>
注意点：
1. 遍历方法的作用。
2. 遍历方法的参数。
3. 表达式的返回值是什么？
4. 能否跳出遍历？
5. 遍历方法的推荐使用场景。
6. 遍历过程中数组是否实时更新。换句话说：被遍历的数组在遍历时的内容是否以调用该遍历方法时为准？
7. 遍历时传入回调函数中的元素是数组中相应项的深拷贝吗？

| 方法名 | 作用 | 参数 | 返回值 | 能否跳出遍历 | 常见使用场景 | 
| ---- | ---- | ---- | ---- | ---- | ---- | 
| map | 对数组中的每一项使用回调方法进行处理，返回处理后的元素形成的新数组 | 回调函数（当前处理的元素、索引、原数组），this参数 | 处理后的元素组成的新数组。 | 否 | 需要对一个数组进行遍历，并且需要使用遍历产生的新数组| 
| filter | 过滤数组，生成新数组 | 回调函数（当前处理的元素、索引、原数组），this参数 | 回调函数返回值为true的元素组成的新数组 | 否 | 个人用的较多的情况便是过滤数组 |
| every | 判断数组中的每一项是否能通过测试 | 回调函数（当前处理的元素、索引、原数组），this参数 | 布尔值true/false | 是 | 个人觉得最正规的用途可能就是检测数组中的元素是否符合某个特点，符合正规用途的使用场景较窄。但是作为唯一一个可以中途跳出遍历的循环，也可以用作for循环的更简便的替代方案——但是不推荐这种用法，还是针对不同场景使用更加符合语义的遍历方式吧 | 
| some | 判断数组中是否有一项使得回调函数的返回值为true | 回调函数（当前处理的元素、索引、原数组），this参数 | 布尔值true/false | 是 | 针对某个数据在数组中是否“存在”的判断 |
| reduce | 对数组中的元素进行遍历，同时在遍历过程中能够进行累加，最后返回累加器最后的值 | 回调函数（即reducer函数，包括四个参数：累加器acc，当前值cur，索引idx，被调用的数组src），累加器的初始值 | reduce函数返回累加器最后的值。reducer函数的返回值由使用者定义，该返回值将被分配给累加器 | 否 | 对数字进行操、使用字符串连接函数等处理字符串，用途十分广泛 |
| reduceRight | 同reduce，但遍历顺序为降序，即从数组的尾部向前遍历 | 同reduce | 同reduce | 否 | 同reduce |
| find | 返回数组中满足提供的测试函数的第一个元素的值。 | 回调函数（当前处理的元素、索引、原数组），this参数 | 数组中满足回调函数的元素的值，未命中返回`undefined` | 是 | 寻找数组中的某一项 |
| findIndex | 大致与find相同，只是返回的为满足测试函数的元素的索引 | 同find | 回调函数返回值为true的元素的索引，未命中返回-1 | 是 | 同find |
| forEach | 对数组的每个元素执行一次给定的函数 | 调函数（当前处理的元素、索引、原数组），this参数 | undefined | 否。可以先使用filter，再使用forEach | 可以替代for循环，更简洁一些。由于该方法会跳过数组中的空数组单元，用来处理系数数组的效果较好 |


### 遍历过程中数组是否实时更新。换句话说：被遍历的数组在遍历时的内容是否为调用遍历方法时为准？
#### map、filter、every、some、find、findIndex等
分情况，“修改”、“删除”、“新增”的情况不同，“修改”情况又分为修改前遍历该元素和修改后遍历到该元素。
* 遍历中修改某个元素：在遍历到某个元素之前发生变化，遍历到该元素时得到的为变化后的值。若遍历后发生修改，则修改是会反映到原数组中的，但是不会影响之前的遍历。
* 遍历中删除某个元素：该元素变为underfined（empty?），但仍然占据在数组中的原位置。如果方法返回的是一个新数组，同时会影响新生成的数组的该索引的元素（根据修改规则判断是否影响）。生成的数组长度不变，原数组长度也不变。
* 遍历中新增某个元素：在遍历时不会对其进行遍历。

#### forEach
规则有点不同。如果数组在迭代时被修改了，则其他元素会被跳过。

### 上述方法，遍历时传入回调函数中的元素是数组中相应项的深拷贝吗？
不是。

## <div id="3">3. 其他注意事项</div>
### <div id="3.1">3.1 map</div>
在遍历过程中一定记得写明返回值！直接更改当前遍历的内容而不反回，不会反映到遍历结束生成的数组中！比如 
```javascript
var b = arr.map(i=>{i.text = "测试";i.value="测试"});       // 此时b数组中所有项的值皆undefined
var b = arr.map(i=>{return {text:"测试",value:"测试"}})     // 此时b数组所有项的值才为一个包含text和value属性的对象
```

### <div id="3.2">3.2 reduce</div> 
注意一下reduce函数中累加器的初始值设置。

## <div id="4">4. 一些思考</div>
for循环功能很强大，但总不能处处都用for循环。在项目中只用for可能会徒增不必要的代码，使得代码写的复杂、晦涩，存在大量重复等。代码在保证运行效率的情况下，应该足够简洁，编写的代码才会更易懂、易维护，应该针对不同的场景使用合适的遍历方法。